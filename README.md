# ConnectionTest

ネットワークアダプタ情報の確認、IPアドレス設定の変更、およびネットワーク診断を一括で行うための WPF アプリケーションです。
.NET 8 環境への移行に伴い、MVVM パターンを採用して高い保守性と安定性を実現しました。

## 概要
本ツールは、保守現場やネットワーク構築作業において、自身のネットワーク設定変更と周囲の機器への疎通確認を効率化することを目的に開発されています。

## 主な機能

### 1. ネットワーク情報の取得
- 起動時に有効なネットワークアダプタを自動検出し、現在の設定（IP/Mask/GW）を表示します。
- 有線（Ethernet）および無線（Wi-Fi）アダプタを優先的に検出し、仮想アダプタはフィルタリングされます。

### 2. IPアドレス設定の変更
- GUI上で編集した値を、`netsh` コマンドを介してネットワークアダプタへ即座に反映します。
- 固定IP設定および DHCP への切り替えをサポートしています。

### 3. 設定の保存と読み込み（init_ip.xml）
- **自動読み込み**: 起動時に実行フォルダ内の `init_ip.xml` を読み込み、初期値を反映します。
- **自動作成**: 設定ファイルが存在しない場合、現在の画面上の値を元にデフォルトの `init_ip.xml` を自動生成します。
- **リロード機能**: 設定ファイルの内容を再読み込みし、画面に反映させることができます。

### 4. 一斉Ping（一斉疎通確認）
同一セグメント内（1〜254）の全ホストに対して並列で Ping を実行し、応答のあったデバイスを表示します。
また、応答に含まれる TTL（Time To Live）値からデバイスの種別を推定します。

- **操作保護**: 一斉Pingの実行中は安全のため、操作パネル全体がロック（グレーアウト）され、重複操作を防止します。

#### デバイス推定の仕様
| TTL値 | 推定種別 | 該当する主なデバイス |
| :--- | :--- | :--- |
| 64以下 | Linux / Cam | ネットワークカメラ、Linuxサーバー、IoT機器など |
| 65〜128 | Windows | Windows PC, Windows Server など |
| 129以上 | NetDevice | ルーター、L3スイッチなどのネットワークインフラ機器 |

### 5. 外部ツール連携
- **Ping/ipconfig**: 標準的な DOS コマンドをアプリ内から実行し、結果を表示します。
- **PortQry 連携**: `PortQry.exe` が同じフォルダにある場合、指定したポートの疎通確認が可能です。

### 6. ショートカット
- **Ctrl + I**: 設定ファイル（`init_ip.xml`）から値を再読み込み（リロード）します。

## 技術仕様
- **プラットフォーム**: .NET 8 (Windows)
- **UI フレームワーク**: WPF / CommunityToolkit.Mvvm
- **実行権限**: IPアドレスの変更操作には管理者権限が必要です。

